
@{
    ViewBag.Title = "UploadHeader";
    Layout = "~/Views/Shared/_LayoutGame.cshtml";
}
<link href="~/Content/Js/uploadify/uploadify.css" rel="stylesheet" />
<script src="~/Content/Js/uploadify/jquery.uploadify.js"></script>

<div id="">
    <img width="100px;" height="100px;" id="imgPriview" src="http://images4.c-ctrip.com/target/headphoto/portrait_180_180.jpg"
         alt="" />
</div>
<input type="file" name="uploadify" id="uploadify" />
<p>
    <a href="javascript:$('#uploadify').uploadify('upload','*');">上传</a>| <a href="javascript:$('#uploadify').uploadify('cancel')">
        取消上传</a>
</p>
    <script type="text/javascript">  
    $(function(){  
        $("#file_upload").uploadify({  
            //开启调试  
            'debug' : false,  
            //是否自动上传  
            'auto':false,  
            'buttonText':'选择照片',  
            //flash  
            'swf': "scripts/uploadify.swf",  
            //文件选择后的容器ID  
            'queueID':'uploadfileQueue',  
            'uploader':'scripts/upload.ashx',  
            'width':'75',  
            'height':'24',  
            'multi':false,  
            'fileTypeDesc':'支持的格式：',  
            'fileTypeExts':'*.jpg;*.jpge;*.gif;*.png',  
            'fileSizeLimit':'1MB',  
            'removeTimeout':1,  
  
            //返回一个错误，选择文件的时候触发  
            'onSelectError':function(file, errorCode, errorMsg){  
                switch(errorCode) {  
                    case -100:  
                        alert("上传的文件数量已经超出系统限制的"+$('#file_upload').uploadify('settings','queueSizeLimit')+"个文件！");  
                        break;  
                    case -110:  
                        alert("文件 ["+file.name+"] 大小超出系统限制的"+$('#file_upload').uploadify('settings','fileSizeLimit')+"大小！");  
                        break;  
                    case -120:  
                        alert("文件 ["+file.name+"] 大小异常！");  
                        break;  
                    case -130:  
                        alert("文件 ["+file.name+"] 类型不正确！");  
                        break;  
                }  
            },  
            //检测FLASH失败调用  
            'onFallback':function(){  
                alert("您未安装FLASH控件，无法上传图片！请安装FLASH控件后再试。");  
            },  
            //上传到服务器，服务器返回相应信息到data里  
            'onUploadSuccess':function(file, data, response){  
                //alert(data);  
            }  
        });  
    });  
  
    function doUplaod(){  
        $('#file_upload').uploadify('upload','*');  
    }  
  
    function closeLoad(){  
        $('#file_upload').uploadify('cancel','*');  
    }  
  
  
    </script> 
